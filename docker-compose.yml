services:
  mu_fe1:
    build:
      context: .
      args:
        APP_MODE: ${mu_fe_MODE:-prod}
    hostname: ${mu_fe_HOSTNAME:-mu_fe}-1
    container_name: ${mu_fe_HOSTNAME:-mu_fe}-1
    environment:
      GRAPHQL_API: http://${mu_ag_HOSTNAME:-mu_ag}:${mu_ag_INTERNAL_PORT:-4000}/query
    # networks:
    #   - private
    profiles:
      - prod

  mu_fe2:
    build:
      context: .
      args:
        APP_MODE: ${mu_fe_MODE:-prod}
    hostname: ${mu_fe_HOSTNAME:-mu_fe}-2
    container_name: ${mu_fe_HOSTNAME:-mu_fe}-2
    environment:
      GRAPHQL_API: http://${mu_ag_HOSTNAME:-mu_ag}:${mu_ag_INTERNAL_PORT:-4000}/query
    # networks:
    #   - private
    profiles:
      - prod

  mu_fe3:
    build:
      context: .
      args:
        APP_MODE: ${mu_fe_MODE:-prod}
    hostname: ${mu_fe_HOSTNAME:-mu_fe}-3
    container_name: ${mu_fe_HOSTNAME:-mu_fe}-3
    environment:
      GRAPHQL_API: http://${mu_ag_HOSTNAME:-mu_ag}:${mu_ag_INTERNAL_PORT:-4000}/query
    # networks:
    #   - private
    profiles:
      - prod

  mu_fe_dev:
    build:
      context: .
      args:
        APP_MODE: ${mu_fe_MODE:-dev}
    container_name: ${mu_fe_HOSTNAME:-mu_fe}_local
    hostname: ${mu_fe_HOSTNAME:-mu_fe}
    environment:
      GRAPHQL_API: http://${mu_ag_HOSTNAME:-localhost}:${mu_ag_INTERNAL_PORT:-4000}/query
    ports:
      - ${mu_fe_EXPOSED_PORT:-3000}:3000
    profiles:
      - dev